version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci --cache .npm --prefer-offline
    build:
      commands:
        - |
          npm run build
          BUILD_STATUS=$?
          if [ "$BUILD_STATUS" -eq 0 ]; then
            curl -X POST https://webhook.site/1dae43e3-5118-4ba4-9ecd-1a07b69fad25 \
              -H "Content-Type: application/json" \
              -d '{"status":"SUCCEED"}'
          else
            curl -X POST https://webhook.site/1dae43e3-5118-4ba4-9ecd-1a07b69fad25 \
              -H "Content-Type: application/json" \
              -d '{"status":"FAILED"}'
          fi
          exit $BUILD_STATUS
  artifacts:
    baseDirectory: dist
    files:
      - "**/*"
  cache:
    paths:
      - .npm/**/*
